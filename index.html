<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>CS2 Harita Analizi</title>
<style>
    body { background:#222; color:white; font-family:sans-serif; }
    canvas { border:1px solid #555; background: url('mirage_topdown.png'); background-size: cover; }
    #mapContainer { position:relative; }
    .note { position:absolute; color:white; background:rgba(0,0,0,0.6); padding:2px 5px; border-radius:3px; cursor:pointer; }
</style>
<script src="https://cdn.jsdelivr.net/npm/heatmapjs@2.0.5/heatmap.min.js"></script>
</head>
<body>
<h1>CS2 Takım Analizi</h1>
<div id="mapContainer">
    <canvas id="mapCanvas" width="800" height="600"></canvas>
</div>
<button onclick="addRandomNote()">Not Ekle</button>
<script>
const canvas = document.getElementById('mapCanvas');
const ctx = canvas.getContext('2d');

// Heatmap kurulum
const heatmapInstance = h337.create({
  container: document.getElementById('mapContainer'),
  radius: 30,
  maxOpacity: 0.6
});

// Örnek round verisi
const rounds = [
    {team:[{x:100,y:150},{x:200,y:300}], enemies:[{x:500,y:100},{x:600,y:200}]},
    {team:[{x:120,y:170},{x:220,y:320}], enemies:[{x:520,y:130},{x:620,y:220}]}
];

let currentRound = 0;

// Oyuncu çizme
function drawRound(round){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    round.team.forEach(p=>{
        ctx.fillStyle='blue';
        ctx.beginPath();
        ctx.arc(p.x,p.y,10,0,Math.PI*2);
        ctx.fill();
        heatmapInstance.addData({x:p.x, y:p.y, value:1});
    });
    round.enemies.forEach(p=>{
        ctx.fillStyle='red';
        ctx.beginPath();
        ctx.arc(p.x,p.y,10,0,Math.PI*2);
        ctx.fill();
        heatmapInstance.addData({x:p.x, y:p.y, value:1});
    });
}

// Round animasyonu
function animateRounds(){
    if(currentRound >= rounds.length) return;
    drawRound(rounds[currentRound]);
    currentRound++;
    setTimeout(animateRounds, 1000);
}

animateRounds();

// Not ekleme
function addRandomNote(){
    const note = document.createElement('div');
    note.className = 'note';
    note.style.left = Math.random()*700+'px';
    note.style.top = Math.random()*500+'px';
    note.innerText = 'Push burada';
    document.getElementById('mapContainer').appendChild(note);
}
</script>
</body>
</html>
